<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>javascript one</title>
    <style>
      .found
      {
        background-color: #ff0;
      }

    
    </style>

  </head>
  <body>
    <form id = "testsearch">
      <textarea id = "incoming" cols = "150" rows = "10">
      </textarea>
    <p>
      Serach pattern: <input id = "pattern" type = "text"/>
    </p>
    </form>
    <button id = "searchSubmit">Search for pattern</button>
    <div id = "searchResult"></div>

  <script>
    document.getElementById("searchSubmit").onclick = function(){
      var pattern = document.getElementById("pattern").value;
      var re = new RegExp(pattern,"g");
      var searchString = document.getElementById("incoming").value;

      var matchArray;
      var resultString = "<pre>";
      var first = 0;
      var last = 0;

      while((matchArray = re.exec(searchSubmit)) != null){
        last = matchArray.index;

        resultString += searchString.substring(first,last);
        resultString += "<span class = 'found'>" + matchArray + "</span>";

        first = re.lastIndex;
      }

      resultString += searchString.substring(first,searchString.length);
      resultString += "</pre>";

      document.getElementById("searchResult").innerHTML = resultString;
    }

  </script>
  </body>
</html>
